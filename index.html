<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll Infinito Bidireccional</title>
    <style>
        /* Estilos generales */
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            width: 100%;
            display: flex;
            justify-content: start;
            align-items: start;
        }

        /* Estilos de contenedor principal */
        #gran-contenedor {
            display: flex;
            flex-direction: row;
            overflow-x: auto;
            overflow-y: hidden;
            scroll-snap-type: x mandatory;
            background-color: blue;
            height: 100%;
            width: 100%;
        }
        #gran-contenedor::-webkit-scrollbar {
            display: none;
        }

        /* Estilos de cada unidad de proyecto */
        .prj-unidad {
            min-width: 100%;
            height: 100%;
            background-color: red;
            border: 1px solid black;
            display: flex;
            align-items: center;
            justify-content: center;
            scroll-snap-align: center;
            position: relative;
        }

        .prj-unidad a {
            display: flex;
            width: 100%;
            height: 100%;
            text-decoration: none;
            color: white;
        }

        .prj-unidad img, .prj-unidad video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .descripcion {
            display: flex;
            flex-direction: column;
            color: blue;
            position: absolute;
            z-index: 5;
            margin: 0.5rem;
            line-height: 12pt;
            font-size: 11pt;
            font-family: Arial, Helvetica, sans-serif;
            font-weight: 500;
            bottom: 0.5rem;
        }

        /* Estilos de la franja superior */
        .franja {
            width: 55px;
            height: 55px;
            display: flex;
            position: absolute;
            color: blue;
            line-height: 11pt;
            font-size: 20pt;
            z-index: 10;
            background-color: rgba(255, 255, 255, 0.495);
            backdrop-filter: blur(5px);
            font-family: Arial, Helvetica, sans-serif;
            font-weight: 500;
            border-radius: 50px;
            transition: all 0.5s ease;
            margin-top: 0.5rem;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            left: 0.5rem;
            padding: 0;
        }

        /* Estilos para los divs dinámicos */
        .nombre-jo {
            display: flex;
            width: auto;
            height: 55px;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
            padding-top:0.15rem;

            align-items: center;

        }

        /* Ajustes para otros elementos dentro de .franja */
        .projectes, .about, .contact, .anel, .ila, .espacio {
            width: 0;
            opacity: 0;
            overflow-y: none;
            transition: width 0.5s ease, opacity 0.5s ease;
            align-items: center;
        }
        .espacio{
background-color: greenyellow;
        }
.ila{
    background-color: blueviolet;
}
        .anel{
                background-color: red;

        }
.m{
    width: auto;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    line-height: 55px;  /* Asegúrate de que coincida con la altura del contenedor */
    margin: 0;
}
        @media (max-width: 767px) {
            .franja {
                font-size: 18pt;
                justify-content: center;
                align-items: center;
            }
        }
    </style>
</head>
<body>

    <div class="franja">
        <div class="nombre-jo">
            <div class="m">M</div> 
            <div class="anel">anel</div>
            <div class="espacio">&nbsp;</div> 
            <div class="v">V</div> 
            <div class="ila">ila</div>
        </div>
        <div class="projectes">Projects</div>
        <div class="about">About</div>
        <div class="contact">Contact</div>
    </div>

    <div id="gran-contenedor">
        <div class="prj-unidad">
            <a href="javascript:void(0);">
                <div class="descripcion">
                    <div class="nom-prj">CLAUR TILES</div>
                    <div class="tags">
                        <div class="tag-prj">Branding</div>
                    </div>
                </div>
                <video loop autoplay muted>
                    <source src="content/uploads/2024/claur/ct-video-inicial.mp4" type="video/mp4">
                    Tu navegador no soporta la etiqueta de video.
                </video>
            </a>
        </div>

        <div class="prj-unidad">
            <a>
                <div class="descripcion">
                    <div class="nom-prj">CLAUR TILES</div>
                    <div class="tags">
                        <div class="tag-prj">Branding</div>
                    </div>
                </div>
                <img src="content/uploads/2024/colapso/colapso-foto-1.jpg">
            </a>
        </div>
        
        <!-- Otras unidades de proyecto con enlaces modificados -->
        <div class="prj-unidad"><a href="javascript:void(0);"><img src="https://via.placeholder.com/800x600" alt="Imagen 3"></a></div>
        <!-- Más contenido según sea necesario -->
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>

        
$(document).ready(function() {
    // Calcular el ancho natural del elemento .anel sin modificar su apariencia inicial
    const anelNaturalWidth = getNaturalWidth($(".anel"));

    $(".nombre-jo").click(function() {
        const elements = [".anel", ".ila", ".projectes", ".about", ".contact", ".espacio"];
        elements.forEach(selector => {
            const element = $(selector);
            if (element.width() > 0) {
                // Si el elemento está visible, lo ocultamos
                slideOutToRight(element);
                $(".franja").css({ width: "55px", fontSize: "20pt", height: "55px", left: "0.5rem", justifyContent: "center" });
                $(".about, .contact, .projectes").css({ padding: "0rem" });
                $(".nombre-jo").css("width", "55px");
            } else {
                // Si el elemento está oculto, usamos el ancho calculado de .anel si es este div
                const targetWidth = selector === ".anel" ? anelNaturalWidth : getNaturalWidth(element);
                
                // Mostramos el elemento con su ancho natural
                slideInFromLeft(element, targetWidth);

                if (window.innerWidth < 767) {
                    $(".franja").css({ width: "calc(100% - 1rem)", left: "0.5rem", fontSize: "13pt" });
                } else {
                    $(".franja").css({ width: "50%", left: "25%", fontSize: "18pt" });
                }
                $(".franja").css({ height: "30px", justifyContent: "start" });
                $(".about, .contact, .projectes").css({ padding: "0 1rem" });
                $(".nombre-jo").css("width", "100%");
            }
        });
    });

    // Función para calcular el ancho natural
    function getNaturalWidth(element) {
        // Guardar el estado original del elemento
        const originalCss = {
            position: element.css("position"),
            visibility: element.css("visibility"),
            display: element.css("display"),
            width: element.css("width")
        };

        // Aplicar estilos temporales para medir el ancho
        element.css({
            position: "absolute",
            visibility: "hidden",
            display: "inline-block",
            width: "auto"
        });
        
        const naturalWidth = element.width();

        // Restaurar el estado original del elemento
        element.css(originalCss);
        return naturalWidth;
    }

    // Animación de entrada
    function slideInFromLeft(element, targetWidth, duration = 300) {
        element.css({ display: 'inline-flex' }).animate({
            width: targetWidth,
            opacity: 1
        }, duration, "swing");
    }

    // Animación de salida
    function slideOutToRight(element, duration = 300) {
        element.animate({
            width: 0,
            opacity: 0
        }, duration, "swing");
    }

    // Evento para ajustar el diseño cuando se cambia el tamaño de la ventana
    $(window).on('resize', function() {
        if (window.innerWidth < 767) {
            $(".franja").css({ width: "calc(100% - 1rem)", left: "0.5rem" });
        } else {
            $(".franja").css({ width: "50%", left: "25%" });
        }
    });
});




        const granContenedor = document.getElementById('gran-contenedor');
        let isCloning = false;

        // Función para clonar los elementos al final
        function cloneCycleEnd() {
            if (isCloning) return;
            isCloning = true;

            const originals = Array.from(granContenedor.children).filter(child => !child.classList.contains('clone'));
            originals.forEach(original => {
                const clone = original.cloneNode(true);
                clone.classList.add('clone');
                granContenedor.appendChild(clone);
            });

            isCloning = false;
        }

        // Función para clonar los elementos al inicio (en orden inverso)
        function cloneCycleStart() {
            if (isCloning) return;
            isCloning = true;

            const originals = Array.from(granContenedor.children).filter(child => !child.classList.contains('clone'));
            for (let i = originals.length - 1; i >= 0; i--) {
                const clone = originals[i].cloneNode(true);
                clone.classList.add('clone');
                granContenedor.insertBefore(clone, granContenedor.firstChild);
            }

            // Ajustar el scroll para mantener la posición visual
            granContenedor.scrollLeft += originals.length * originals[0].offsetWidth;

            isCloning = false;
        }

        // Verificar la posición de scroll y clonar dinámicamente
        function checkScrollPosition() {
            const originals = Array.from(granContenedor.children).filter(child => !child.classList.contains('clone'));
            const originalWidth = originals[0].offsetWidth;
            const totalWidth = originals.length * originalWidth;

            if (granContenedor.scrollLeft <= originalWidth) {
                // Si estamos al inicio, clonar al principio
                cloneCycleStart();
            } else if (granContenedor.scrollLeft >= granContenedor.scrollWidth - granContenedor.clientWidth - originalWidth) {
                // Si estamos al final, clonar al final
                cloneCycleEnd();
            }
        }

        // Asignar eventos
        granContenedor.addEventListener('scroll', checkScrollPosition);
        window.addEventListener('wheel', (event) => {
            if (window.innerWidth >= 1024 && event.deltaY !== 0) {
                event.preventDefault();
                granContenedor.scrollLeft += event.deltaY;
            }
        }, { passive: false });
    </script>
</body>
</html>
